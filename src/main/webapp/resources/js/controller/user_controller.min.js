"use strict";App.controller("UserController",["$scope","UserService",function(e,r){var t=this;t.selectedUser,t.users=[],t.geners=["Female","Male","Other"],t.currentUsers=[],t.currentPage=1,t.numPerPage=10,t.maxSize=5,t.pages=[],t.fetchAllUsers=function(){r.fetchAllUsers().then(function(e){t.users=e;for(var r=0;r<Math.ceil(t.users.length/t.numPerPage);r++)t.pages.push(""+(r+1));t.paging()},function(e){console.error("Error while fetching Currencies")})},t.findUserById=function(e){r.fetchByID(e).then(function(e){var r=e;return r},function(r){console.error("Error while fetching user with id "+e)})},t.createUser=function(e){r.createUser(e).then(t.fetchAllUsers,function(e){console.error("Error while creating User.")})},t.updateUser=function(e,n){r.updateUser(e,n).then(t.fetchAllUsers,function(e){console.error("Error while updating User.")})},t.deleteUser=function(e){confirm("Are you sure?")&&r.deleteUser(e).then(t.fetchAllUsers,function(e){console.error("Error while deleting User.")})},t.paging=function(){var e=(t.currentPage-1)*t.numPerPage,r=e+t.numPerPage;t.currentUsers=t.users.slice(e,r)},t.pageChanged=function(e){e>0&&e<=t.pages.length&&(t.currentPage=e,t.paging())},t.fetchAllUsers(),t.submit=function(){null==t.selectedUser.id?validateAll()&&(t.createUser(t.selectedUser),userModal("hide"),t.reset()):validateUpdate()&&(t.updateUser(t.selectedUser),userModal("hide"),t.reset())},t.add=function(e){t.reset(),userModal("show"),initUserModal()},t.edit=function(e){r.fetchByID(e).then(function(e){t.selectedUser=e,t.selectedUser.birthdate=new Date(t.selectedUser.birthdate),userModal("show"),initUserModal()},function(r){console.error("Error while fetching user with id "+e)})},t.remove=function(e){t.selectedUser.id===e&&t.reset(),t.deleteUser(e)},t.selectGener=function(e){t.selectedUser.gender=e},t.reset=function(){t.selectedUser={id:null,name:"",email:"",birthdate:"",gender:"",phone:""},t.selectedUser.birthdate=new Date,e.appFrm.$setPristine()}}]);